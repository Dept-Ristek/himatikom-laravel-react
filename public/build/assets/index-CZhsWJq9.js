import{r as o,j as D,e as z}from"./app-BC__SOPf.js";import{e as L,P as A,a as O,f as H,d as g}from"./index-Dm8DcO5X.js";import{u as C}from"./utils-6PJseIst.js";function K(t,e=globalThis==null?void 0:globalThis.document){const r=L(t);o.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var V="DismissableLayer",R="dismissableLayer.update",X="dismissableLayer.pointerDownOutside",Y="dismissableLayer.focusOutside",x,U=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),W=o.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...f}=t,i=o.useContext(U),[u,v]=o.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,E]=o.useState({}),P=C(e,d=>v(d)),p=Array.from(i.layers),[N]=[...i.layersWithOutsidePointerEventsDisabled].slice(-1),_=p.indexOf(N),T=u?p.indexOf(u):-1,k=i.layersWithOutsidePointerEventsDisabled.size>0,w=T>=_,j=G(d=>{const h=d.target,S=[...i.branches].some(b=>b.contains(h));!w||S||(s==null||s(d),l==null||l(d),d.defaultPrevented||c==null||c())},m),M=J(d=>{const h=d.target;[...i.branches].some(b=>b.contains(h))||(a==null||a(d),l==null||l(d),d.defaultPrevented||c==null||c())},m);return K(d=>{T===i.layers.size-1&&(n==null||n(d),!d.defaultPrevented&&c&&(d.preventDefault(),c()))},m),o.useEffect(()=>{if(u)return r&&(i.layersWithOutsidePointerEventsDisabled.size===0&&(x=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),i.layersWithOutsidePointerEventsDisabled.add(u)),i.layers.add(u),I(),()=>{r&&i.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=x)}},[u,m,r,i]),o.useEffect(()=>()=>{u&&(i.layers.delete(u),i.layersWithOutsidePointerEventsDisabled.delete(u),I())},[u,i]),o.useEffect(()=>{const d=()=>E({});return document.addEventListener(R,d),()=>document.removeEventListener(R,d)},[]),D.jsx(A.div,{...f,ref:P,style:{pointerEvents:k?w?"auto":"none":void 0,...t.style},onFocusCapture:O(t.onFocusCapture,M.onFocusCapture),onBlurCapture:O(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:O(t.onPointerDownCapture,j.onPointerDownCapture)})});W.displayName=V;var q="DismissableLayerBranch",B=o.forwardRef((t,e)=>{const r=o.useContext(U),n=o.useRef(null),s=C(e,n);return o.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),D.jsx(A.div,{...t,ref:s})});B.displayName=q;function G(t,e=globalThis==null?void 0:globalThis.document){const r=L(t),n=o.useRef(!1),s=o.useRef(()=>{});return o.useEffect(()=>{const a=c=>{if(c.target&&!n.current){let f=function(){F(X,r,i,{discrete:!0})};const i={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=f,e.addEventListener("click",s.current,{once:!0})):f()}else e.removeEventListener("click",s.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function J(t,e=globalThis==null?void 0:globalThis.document){const r=L(t),n=o.useRef(!1);return o.useEffect(()=>{const s=a=>{a.target&&!n.current&&F(Y,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function I(){const t=new CustomEvent(R);document.dispatchEvent(t)}function F(t,e,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?H(s,a):s.dispatchEvent(a)}var oe=W,ae=B,Q="Portal",Z=o.forwardRef((t,e)=>{var c;const{container:r,...n}=t,[s,a]=o.useState(!1);g(()=>a(!0),[]);const l=r||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?z.createPortal(D.jsx(A.div,{...n,ref:e}),l):null});Z.displayName=Q;function $(t,e){return o.useReducer((r,n)=>e[r][n]??r,t)}var ee=t=>{const{present:e,children:r}=t,n=te(e),s=typeof r=="function"?r({present:n.isPresent}):o.Children.only(r),a=C(n.ref,ne(s));return typeof r=="function"||n.isPresent?o.cloneElement(s,{ref:a}):null};ee.displayName="Presence";function te(t){const[e,r]=o.useState(),n=o.useRef({}),s=o.useRef(t),a=o.useRef("none"),l=t?"mounted":"unmounted",[c,f]=$(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const i=y(n.current);a.current=c==="mounted"?i:"none"},[c]),g(()=>{const i=n.current,u=s.current;if(u!==t){const m=a.current,E=y(i);t?f("MOUNT"):E==="none"||(i==null?void 0:i.display)==="none"?f("UNMOUNT"):f(u&&m!==E?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,f]),g(()=>{if(e){let i;const u=e.ownerDocument.defaultView??window,v=E=>{const p=y(n.current).includes(E.animationName);if(E.target===e&&p&&(f("ANIMATION_END"),!s.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",i=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},m=E=>{E.target===e&&(a.current=y(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{u.clearTimeout(i),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:o.useCallback(i=>{i&&(n.current=getComputedStyle(i)),r(i)},[])}}function y(t){return(t==null?void 0:t.animationName)||"none"}function ne(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}export{ae as B,W as D,ee as P,oe as R,Z as a};
