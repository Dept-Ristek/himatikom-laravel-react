import{W as z,r as x,j as a,Y as M,a as G}from"./app-BC__SOPf.js";import{L as i}from"./label-DpfHqOCJ.js";import{P as u,a as j,b as f}from"./popover-DmhqyVXy.js";import{B as p}from"./button-aI15s4PB.js";import{C as b,a as g}from"./index-D6mfvjMq.js";import{C as N,a as v,b as k,c as C,d as y,e as _}from"./CommandContent-DxBT88uR.js";import{c as w}from"./utils-6PJseIst.js";import{I as r}from"./input-Db9qwkHX.js";import{u as K}from"./use-toast-jBdQ0q1s.js";import{t as D,d as T}from"./data-DSixZN8S.js";import{M as R}from"./MainLayout-DBQDGeUg.js";import{T as U}from"./textarea-CKj8noHs.js";import{z as W}from"./transition-CezwKZ0F.js";import"./index-Dm8DcO5X.js";import"./index-CZhsWJq9.js";import"./Combination-D7pIyE80.js";import"./index-l-XiRjVR.js";import"./index-DI5J79Mi.js";import"./index-ClB-KppM.js";import"./dialog-iYf8mwPu.js";import"./alert-dialog-BfdfrZuh.js";import"./createLucideIcon-XDsn1f4s.js";import"./toaster--UsfZD4W.js";import"./dropdown-menu-BT1J7vqF.js";import"./align-justify-DzJpg43a.js";import"./Image-BNe35iiT.js";const ja=({title:P,document:l})=>{const{toast:S}=K(),{data:s,setData:t,post:I,errors:Y,processing:E,recentlySuccessful:o}=z({name:l.name,tag:l.tag,filepath:null,description:l.description,doc_from:l.doc_from??null,doc_to:l.doc_to??null}),m=D.find(e=>e.id===l.tag),n=T.find(e=>e.id===l.type),[c,d]=x.useState({label_tag:m==null?void 0:m.label,label_type:n==null?void 0:n.label});x.useEffect(()=>{o&&(S({variant:"default",title:"Tambah Document",description:"Berhasil menambahkan data document baru!"}),t({...s,name:"",tag:"",filepath:"",description:"",doc_from:null,doc_to:null}),d({...c,label_tag:null,label_type:null}))},[o]);const L=e=>{e.target.files&&e.target.files[0]&&t("filepath",e.target.files[0])},B=e=>{e.preventDefault(),I(route("admin.document.store"))};return a.jsxs(R,{children:[a.jsx(M,{title:P}),a.jsxs("div",{className:"flex flex-col justify-center p-3 max-w-xl",children:[a.jsx("h1",{className:"text-2xl text-black font-bold mb-5",children:"Form Tambah Data Document"}),a.jsxs("form",{onSubmit:B,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{className:"text-right",children:"Nama Document"}),a.jsx(r,{id:"name",value:s.name,onChange:e=>t("name",e.target.value),className:"col-span-3 mb-3"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx(i,{className:"text-right",children:"Document Tag"}),a.jsxs(u,{children:[a.jsx(j,{asChild:!0,children:a.jsxs(p,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[c.label_tag??"Pilih Document Tag",a.jsx(b,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(f,{className:"w-full p-0",children:a.jsxs(N,{children:[a.jsx(v,{placeholder:"Cari berdasarkan Nama Tag...",className:"h-9"}),a.jsxs(k,{children:[a.jsx(C,{children:"Data tag tidak ditemukan."}),a.jsx(y,{children:D.map(e=>a.jsxs(_,{value:e.id,onSelect:F=>{Promise.all([t("tag",e.id),d(h=>({...h,label_tag:e.label}))])},children:[e.label,a.jsx(g,{className:w("ml-auto h-4 w-4 text-black",e.id===s.tag?"opacity-100":"opacity-0")})]},e.id))})]})]})})]})]}),a.jsxs("div",{className:"mb-3",hidden:s.tag!="surat",children:[a.jsx(i,{className:"text-right",children:"Tipe Surat"}),a.jsxs(u,{children:[a.jsx(j,{asChild:!0,children:a.jsxs(p,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[c.label_type??"Pilih Tipe Surat",a.jsx(b,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(f,{className:"w-full p-0",children:a.jsxs(N,{children:[a.jsx(v,{placeholder:"Cari berdasarkan tipe surat...",className:"h-9"}),a.jsxs(k,{children:[a.jsx(C,{children:"Data tipe surat tidak ditemukan."}),a.jsx(y,{children:T.map(e=>a.jsxs(_,{value:e.id,onSelect:F=>{Promise.all([t("type",e.id),d(h=>({...h,label_type:e.label}))])},children:[e.label,a.jsx(g,{className:w("ml-auto h-4 w-4 text-black",e.id===s.type?"opacity-100":"opacity-0")})]},e.id))})]})]})})]})]}),a.jsxs("div",{className:"mb-3",hidden:s.tag!="surat",children:[a.jsx(i,{className:"text-right",children:"Nama Pengirim"}),a.jsx(r,{id:"doc_from",value:s.doc_from,onChange:e=>t("doc_from",e.target.value),className:"col-span-3 mb-3"})]}),a.jsxs("div",{className:"mb-3",hidden:s.tag!="surat",children:[a.jsx(i,{className:"text-right",children:"Nama Penerima"}),a.jsx(r,{id:"doc_to",value:s.doc_to,onChange:e=>t("doc_to",e.target.value),className:"col-span-3 mb-3"})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx(i,{htmlFor:"name",className:"text-right",children:"Deskripsi"}),a.jsx(U,{id:"description",value:s.description,onChange:e=>t("description",e.target.value),className:"col-span-3 mb-3",rows:10,placeholder:"Tuliskan saja tidak ada jika tidak ada deskripsi untuk dokumen"})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx(i,{htmlFor:"filePath",className:"text-right",children:"Upload Document"}),a.jsx(r,{id:"filePath",type:"file",value:s.filepath,onChange:L,className:"col-span-3 mb-3 file:bg-slate-200 file:p-2 file:my-auto file:rounded-l-md file:-ml-3 file:-mt-1"})]}),a.jsxs("div",{className:"flex flex-row items-center gap-2",children:[a.jsx(G,{href:route("admin.document.index"),className:"bg-red-500 p-[0.4rem] rounded-md text-sm text-white hover:bg-red-400 px-3 py-2",children:"Kembali"}),a.jsx(p,{type:"submit",disabled:E,children:"Simpan"})]}),a.jsx(W,{show:o,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:a.jsx("span",{className:"text-sm",children:"Berhasil!"})})]})]})]})};export{ja as default};
